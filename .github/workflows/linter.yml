---
name: Super-Linter
# https://github.com/marketplace/actions/super-linter

on:
  workflow_call:
    inputs:
      slim:
        description: Enable Super-Linter "Slim" Image Variant
        required: false
        type: boolean
        default: true
      version:
        description: Super-Linter Version
        required: false
        type: number
        default: 4

permissions:
  contents: read
  statuses: write
  pull-requests: write

jobs:
  lint:
    name: Lint Code Base
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          # Full git history is needed to get a proper
          # list of changed files within `super-linter`
          fetch-depth: 0

      - name: Load Super-Linter Config
        # Load super-linter config from '.github/super-linter.env' file.
        run: test -f .github/super-linter.env && cat .github/super-linter.env >> "$GITHUB_ENV"

      - name: Lint Code Base (slim)
        uses: github/super-linter/slim@v4
        if: ${{ inputs.version == 4 && inputs.slim == true }}

      - name: Lint Code Base (default)
        uses: github/super-linter@v4
        if: ${{ inputs.version == 4 && inputs.slim == false }}
